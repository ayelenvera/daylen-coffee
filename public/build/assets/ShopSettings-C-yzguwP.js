import{a as F,r as h,c as N,o as z,g as d,d as i,e as L,u as q,Z as A,w as M,f as e,i as u,t as a,k as K,l as p,j as x,n as y,p as g,A as P,F as H}from"./app-BYhsu56_.js";import{_ as W}from"./AdminLayout-CYyKNtv3.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./HelpLink-0Gkg05qS.js";const J={class:"flex justify-between items-center"},Z={class:"flex space-x-3"},Q=["disabled"],Y={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},ee={class:"py-12"},oe={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},se={key:0,class:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg"},te={key:1,class:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},le={class:"p-6"},ae={class:"border-b border-gray-200 pb-8"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"block text-sm font-medium text-gray-700 mb-2"},ie={class:"text-xs text-gray-500 ml-1"},ce={key:0,class:"text-red-500 text-xs mt-1"},ue={class:"block text-sm font-medium text-gray-700 mb-2"},me={class:"text-xs text-gray-500 ml-1"},pe={key:0,class:"text-red-500 text-xs mt-1"},ge={class:"border-b border-gray-200 pb-8"},be={class:"flex flex-col md:flex-row items-start space-y-6 md:space-y-0 md:space-x-8"},xe={class:"flex-shrink-0"},fe={class:"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center overflow-hidden bg-gray-50"},ye=["src"],ve={key:1,class:"text-center text-gray-400 p-4"},_e={class:"flex-1"},he={key:0,class:"mt-4 p-3 bg-gray-50 rounded-lg"},we={class:"flex items-center space-x-3"},ke=["src"],Ce={class:"text-sm text-gray-700"},Se={class:"border-b border-gray-200 pb-8"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ee={key:0,class:"text-red-500 text-xs mt-1"},Ue={class:"block text-sm font-medium text-gray-700 mb-2"},Ve={class:"text-xs text-gray-500 ml-1"},Xe={key:0,class:"text-red-500 text-xs mt-1"},je={class:"mt-6"},Pe={class:"block text-sm font-medium text-gray-700 mb-2"},De={class:"text-xs text-gray-500 ml-1"},Ie={key:0,class:"text-red-500 text-xs mt-1"},Te={class:"border-b border-gray-200 pb-8"},Fe={class:"block text-sm font-medium text-gray-700 mb-2"},Le={class:"text-xs text-gray-500 ml-1"},Me={key:0,class:"text-red-500 text-xs mt-1"},Be={class:"border-b border-gray-200 pb-8"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$e={class:"flex items-center space-x-3"},Ne={key:0,class:"text-red-500 text-xs mt-1"},ze={class:"flex items-center space-x-3"},qe={key:0,class:"text-red-500 text-xs mt-1"},Ae={class:"mt-6 p-4 bg-gray-50 rounded-lg"},Ke={class:"flex space-x-4"},He={class:"flex items-center space-x-2"},We={class:"flex items-center space-x-2"},Oe={class:"flex justify-end space-x-4 pt-6"},Je=["disabled"],Ze={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},Qe={class:"mt-8 bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ye={class:"p-6"},eo={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 bg-gray-50"},oo={class:"flex items-center space-x-3 mb-4"},so={key:0,class:"w-12 h-12 flex items-center justify-center"},to=["src","alt"],ro={class:"text-gray-600 mb-4"},lo={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600"},ao={class:"mt-4 text-sm gap-4 text-gray-600"},no={class:"gap-4 text-sm text-gray-600"},io={__name:"ShopSettings",setup(co){const s=F({shop_name:"",logo:null,email:"",phone:"",address:"",ruc:"",about_us:"",primary_color:"#d97706",secondary_color:"#f59e0b"}),k=h(null),C=h(null),v=h(null),f=h(!1),w=h(""),m=h(""),t=F({shop_name:"",ruc:"",phone:"",email:"",address:"",about_us:"",primary_color:"",secondary_color:""}),S=N(()=>s.shop_name&&s.ruc&&s.phone&&s.email&&s.address&&s.about_us&&!t.shop_name&&!t.ruc&&!t.phone&&!t.email&&!t.address&&!t.about_us&&!t.primary_color&&!t.secondary_color),B=r=>{let n=r.target.value.replace(/[^\d+]/g,"");if(n.startsWith("+595")||(n="+595"+n.replace(/^\+?595?/,"")),n=n.substring(0,13),n.length>4){const c=n.substring(0,4),b=n.substring(4).replace(/\D/g,"");let l=c;b.length>0&&(l+=" "+b.substring(0,3)),b.length>3&&(l+=" "+b.substring(3,9)),s.phone=l}else s.phone=n;U()},G=r=>{if(r.ctrlKey||r.altKey||r.metaKey||[8,9,13,27,37,38,39,40,46].includes(r.keyCode))return;const o=r.key;if(!/[\d+]/.test(o)){r.preventDefault();return}if(o==="+"&&s.phone.includes("+")){r.preventDefault();return}},R=()=>{s.shop_name.length>50?t.shop_name="El nombre no puede exceder 50 caracteres":s.shop_name.length<2?t.shop_name="El nombre debe tener al menos 2 caracteres":t.shop_name=""},E=()=>{const r=/^[0-9]{6,10}-[0-9]{1}$/;s.ruc.length>20?t.ruc="El RUC no puede exceder 20 caracteres":r.test(s.ruc)?t.ruc="":t.ruc="Formato de RUC invÃ¡lido. Use: 12345678-9"},U=()=>{/^\+595\s\d{3}\s\d{6}$/.test(s.phone)?t.phone="":t.phone="Formato invÃ¡lido. Use: +595 XXX XXXXXX"},V=()=>{const r=/^[^\s@]+@gmail\.com$/i;s.email.length>100?t.email="El email no puede exceder 100 caracteres":r.test(s.email)?t.email="":t.email="Debe ser una direcciÃ³n de Gmail vÃ¡lida (ejemplo@gmail.com)"},X=()=>{s.address.length>200?t.address="La direcciÃ³n no puede exceder 200 caracteres":s.address.length<10?t.address="La direcciÃ³n debe tener al menos 10 caracteres":t.address=""},j=()=>{s.about_us.length>500?t.about_us="La descripciÃ³n no puede exceder 500 caracteres":s.about_us.length<10?t.about_us="La descripciÃ³n debe tener al menos 10 caracteres":t.about_us=""},_=r=>{/^#[0-9A-F]{6}$/i.test(s[r])?t[r]="":t[r]="Formato de color invÃ¡lido. Use: #RRGGBB"},D=()=>{var n,c;const r=((c=(n=window.$page)==null?void 0:n.props)==null?void 0:c.shopSettings)||{};s.shop_name=r.shop_name||"Daylen CafeterÃ­a",s.email=r.email||"daylencoffee@gmail.com";const o=r.phone||"+595 986 195914";s.phone=o,s.address=r.address||"Calle Carlos GÃ³mez, Barrio Remansito Sector 5, Ciudad del Este",s.ruc=r.ruc||"12345678-9",s.about_us=r.about_us||"Somos una cafeterÃ­a dedicada a ofrecer los mejores productos con ingredientes de calidad.",s.primary_color=r.primary_color||"#d97706",s.secondary_color=r.secondary_color||"#f59e0b",R(),E(),U(),V(),X(),j(),_("primary_color"),_("secondary_color"),r.logo_url&&(v.value=r.logo_url)},$=r=>{const o=r.target.files[0];if(!o)return;if(!["image/jpeg","image/png","image/webp"].includes(o.type)){m.value="Formato de archivo no vÃ¡lido. Use JPG, PNG o WebP.";return}if(o.size>5*1024*1024){m.value="El archivo es demasiado grande. MÃ¡ximo 5MB.";return}C.value=o,s.logo=o;const c=new FileReader;c.onload=b=>{v.value=b.target.result},c.readAsDataURL(o),m.value=""},I=async()=>{if(R(),E(),U(),V(),X(),j(),_("primary_color"),_("secondary_color"),!S.value){m.value="Por favor, corrige los errores en el formulario";return}f.value=!0,w.value="",m.value="";try{const r=new FormData;Object.keys(s).forEach(c=>{c==="logo"&&s.logo?r.append("logo",s.logo):c!=="logo"&&r.append(c,s[c])});const n=await(await fetch("/admin/shop-settings",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:r})).json();n.success?(w.value=n.message,setTimeout(()=>{window.location.reload()},1500)):m.value=n.message||"Error al guardar la configuraciÃ³n"}catch(r){console.error("Error saving shop settings:",r),m.value="Error de conexiÃ³n. Intente nuevamente."}finally{f.value=!1}},T=()=>{D(),C.value=null,k.value&&(k.value.value=""),w.value="",m.value=""};return z(()=>{D()}),(r,o)=>(i(),d(H,null,[L(q(A),{title:"ConfiguraciÃ³n"}),L(W,null,{header:M(()=>[e("div",J,[o[13]||(o[13]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," âš™ï¸ ConfiguraciÃ³n de la Tienda ",-1)),e("div",Z,[e("button",{onClick:T,type:"button",class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200"}," ðŸ”„ Restablecer "),e("button",{onClick:I,disabled:f.value||!S.value,class:"bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[f.value?(i(),d("svg",Y,[...o[12]||(o[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),e("span",null,a(f.value?"Guardando...":"ðŸ’¾ Guardar Cambios"),1)],8,Q)])])]),default:M(()=>{var n,c,b;return[e("div",ee,[e("div",oe,[w.value?(i(),d("div",se," âœ… "+a(w.value),1)):u("",!0),m.value?(i(),d("div",te," âŒ "+a(m.value),1)):u("",!0),e("div",re,[e("div",le,[e("form",{onSubmit:K(I,["prevent"]),class:"space-y-8"},[e("div",ae,[o[16]||(o[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"ðŸ“‹ InformaciÃ³n BÃ¡sica",-1)),e("div",ne,[e("div",null,[e("label",de,[o[14]||(o[14]=x(" Nombre de la Tienda * ",-1)),e("span",ie,"("+a(s.shop_name.length)+"/50 caracteres)",1)]),p(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>s.shop_name=l),onInput:R,type:"text",maxlength:"50",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500",{"border-red-500":t.shop_name}]),required:"",placeholder:"Ej: Daylen CafeterÃ­a"},null,34),[[g,s.shop_name]]),t.shop_name?(i(),d("p",ce,a(t.shop_name),1)):u("",!0)]),e("div",null,[e("label",ue,[o[15]||(o[15]=x(" RUC * ",-1)),e("span",me,"("+a(s.ruc.length)+"/20 caracteres)",1)]),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>s.ruc=l),onInput:E,type:"text",maxlength:"20",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500",{"border-red-500":t.ruc}]),required:"",placeholder:"Ej: 12345678-9"},null,34),[[g,s.ruc]]),t.ruc?(i(),d("p",pe,a(t.ruc),1)):u("",!0)])])]),e("div",ge,[o[22]||(o[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"ðŸ–¼ï¸ Logo de la Tienda",-1)),e("div",be,[e("div",xe,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Vista Previa",-1)),e("div",fe,[v.value?(i(),d("img",{key:0,src:v.value,alt:"Logo preview",class:"w-full h-full object-contain"},null,8,ye)):(i(),d("div",ve,[...o[17]||(o[17]=[e("svg",{class:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"text-xs"},"Sin logo",-1)])]))])]),e("div",_e,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nuevo Logo ",-1)),e("input",{type:"file",ref_key:"logoInput",ref:k,onChange:$,accept:"image/jpeg,image/png,image/webp",class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"},null,544),o[21]||(o[21]=e("p",{class:"text-xs text-gray-500 mt-2"}," Formatos aceptados: JPG, PNG, WebP. TamaÃ±o mÃ¡ximo: 5MB. ",-1)),(n=r.$page.props.shopSettings)!=null&&n.logo_url&&!C.value?(i(),d("div",he,[o[19]||(o[19]=e("p",{class:"font-medium text-sm text-gray-700 mb-2"},"Logo actual:",-1)),e("div",we,[e("img",{src:r.$page.props.shopSettings.logo_url,alt:"Logo actual",class:"w-12 h-12 object-contain"},null,8,ke),e("span",Ce,a(r.$page.props.shopSettings.logo_url),1)])])):u("",!0)])])]),e("div",Se,[o[26]||(o[26]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"ðŸ“ž InformaciÃ³n de Contacto",-1)),e("div",Re,[e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[x(" TelÃ©fono * "),e("span",{class:"text-xs text-gray-500 ml-1"},"Formato: +595 XXX XXXXXX")],-1)),p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>s.phone=l),onInput:B,onKeydown:G,type:"text",maxlength:"15",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500 font-mono",{"border-red-500":t.phone}]),required:"",placeholder:"+595 986 195914"},null,34),[[g,s.phone]]),t.phone?(i(),d("p",Ee,a(t.phone),1)):u("",!0)]),e("div",null,[e("label",Ue,[o[24]||(o[24]=x(" Email * ",-1)),e("span",Ve,"("+a(s.email.length)+"/100 caracteres)",1)]),p(e("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>s.email=l),onInput:V,type:"email",maxlength:"100",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500",{"border-red-500":t.email}]),required:"",placeholder:"Ej: daylencoffee@gmail.com"},null,34),[[g,s.email]]),t.email?(i(),d("p",Xe,a(t.email),1)):u("",!0)])]),e("div",je,[e("label",Pe,[o[25]||(o[25]=x(" DirecciÃ³n Completa * ",-1)),e("span",De,"("+a(s.address.length)+"/200 caracteres)",1)]),p(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=l=>s.address=l),onInput:X,rows:"3",maxlength:"200",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500",{"border-red-500":t.address}]),required:"",placeholder:"Ej: Calle Carlos GÃ³mez, Barrio Remansito Sector 5, Ciudad del Este"},null,34),[[g,s.address]]),t.address?(i(),d("p",Ie,a(t.address),1)):u("",!0)])]),e("div",Te,[o[29]||(o[29]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"ðŸ“ Acerca de Nosotros",-1)),e("div",null,[e("label",Fe,[o[27]||(o[27]=x(" DescripciÃ³n de la Tienda * ",-1)),e("span",Le,"("+a(s.about_us.length)+"/500 caracteres)",1)]),p(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=l=>s.about_us=l),onInput:j,rows:"4",maxlength:"500",class:y(["w-full border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500",{"border-red-500":t.about_us}]),required:"",placeholder:"Describe tu cafeterÃ­a, misiÃ³n, valores, etc..."},null,34),[[g,s.about_us]]),t.about_us?(i(),d("p",Me,a(t.about_us),1)):u("",!0),o[28]||(o[28]=e("p",{class:"text-xs text-gray-500 mt-2"}," Esta descripciÃ³n aparecerÃ¡ en el footer de tu sitio web. ",-1))])]),e("div",Be,[o[37]||(o[37]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"ðŸŽ¨ Colores de la Marca",-1)),e("div",Ge,[e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Color Primario * ",-1)),e("div",$e,[p(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>s.primary_color=l),type:"color",class:"w-16 h-10 border border-gray-300 rounded-md cursor-pointer"},null,512),[[g,s.primary_color]]),p(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>s.primary_color=l),onInput:o[8]||(o[8]=l=>_("primary_color")),type:"text",class:y(["flex-1 border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500 font-mono text-sm",{"border-red-500":t.primary_color}]),placeholder:"#d97706",maxlength:"7"},null,34),[[g,s.primary_color]])]),t.primary_color?(i(),d("p",Ne,a(t.primary_color),1)):u("",!0),o[31]||(o[31]=e("p",{class:"text-xs text-gray-500 mt-2"}," Color principal para botones y elementos destacados ",-1))]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Color Secundario * ",-1)),e("div",ze,[p(e("input",{"onUpdate:modelValue":o[9]||(o[9]=l=>s.secondary_color=l),type:"color",class:"w-16 h-10 border border-gray-300 rounded-md cursor-pointer"},null,512),[[g,s.secondary_color]]),p(e("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>s.secondary_color=l),onInput:o[11]||(o[11]=l=>_("secondary_color")),type:"text",class:y(["flex-1 border-gray-300 rounded-md focus:ring-amber-500 focus:border-amber-500 font-mono text-sm",{"border-red-500":t.secondary_color}]),placeholder:"#f59e0b",maxlength:"7"},null,34),[[g,s.secondary_color]])]),t.secondary_color?(i(),d("p",qe,a(t.secondary_color),1)):u("",!0),o[33]||(o[33]=e("p",{class:"text-xs text-gray-500 mt-2"}," Color secundario para hover states y elementos secundarios ",-1))])]),e("div",Ae,[o[36]||(o[36]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Vista Previa de Colores:",-1)),e("div",Ke,[e("div",He,[e("div",{class:"w-6 h-6 rounded border border-gray-300",style:P({backgroundColor:s.primary_color})},null,4),o[34]||(o[34]=e("span",{class:"text-sm text-gray-600"},"Primario",-1))]),e("div",We,[e("div",{class:"w-6 h-6 rounded border border-gray-300",style:P({backgroundColor:s.secondary_color})},null,4),o[35]||(o[35]=e("span",{class:"text-sm text-gray-600"},"Secundario",-1))])])])]),e("div",Oe,[e("button",{type:"button",onClick:T,class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200"}," ðŸ”„ Restablecer "),e("button",{type:"submit",disabled:f.value||!S.value,class:"bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center space-x-2"},[f.value?(i(),d("svg",Ze,[...o[38]||(o[38]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),e("span",null,a(f.value?"Guardando...":"ðŸ’¾ Guardar Cambios"),1)],8,Je)])],32)])]),e("div",Qe,[e("div",Ye,[o[43]||(o[43]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"ðŸ‘€ Vista Previa",-1)),e("div",eo,[e("div",oo,[v.value||(c=r.$page.props.shopSettings)!=null&&c.logo_url?(i(),d("div",so,[e("img",{src:v.value||((b=r.$page.props.shopSettings)==null?void 0:b.logo_url),alt:s.shop_name,class:"w-full h-full object-contain"},null,8,to)])):u("",!0),e("h4",{class:"text-xl font-bold",style:P({color:s.primary_color})},a(s.shop_name||"Nombre de Tienda"),5)]),e("p",ro,a(s.about_us||"DescripciÃ³n de la tienda aparecerÃ¡ aquÃ­..."),1),e("div",lo,[e("div",null,[o[39]||(o[39]=e("strong",null,"TelÃ©fono:",-1)),x(" "+a(s.phone||"+595 986 195914"),1)]),e("div",null,[o[40]||(o[40]=e("strong",null,"Email:",-1)),x(" "+a(s.email||"daylencoffee@gmail.com"),1)]),e("div",null,[o[41]||(o[41]=e("strong",null,"RUC:",-1)),x(" "+a(s.ruc||"12345678-9"),1)])]),e("div",ao,[o[42]||(o[42]=e("strong",null,"DirecciÃ³n: ",-1)),e("span",no,a(s.address||"DirecciÃ³n de la tienda..."),1)])])])])])])]}),_:1})],64))}},bo=O(io,[["__scopeId","data-v-b16affb7"]]);export{bo as default};
