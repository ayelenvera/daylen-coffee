import{Q as C,c as h,T as V,g as d,d as n,e as N,b as E,u as e,Z as A,w as B,f as s,k as U,l as m,i as l,n as p,p as u,t as i,C as D,F,N as x}from"./app-BYhsu56_.js";import{_ as P}from"./AdminLayout-CYyKNtv3.js";import{_ as T}from"./AuthenticatedLayout-B6T8qzH8.js";import"./HelpLink-0Gkg05qS.js";const j={class:"max-w-2xl mx-auto mt-12"},z={class:"bg-white shadow-sm rounded-lg border border-gray-200"},G={class:"p-6"},H={class:"mb-6"},I={class:"grid grid-cols-1 gap-4"},L={key:0,class:"text-red-500 text-sm mt-1"},M={key:0,class:"text-red-500 text-sm mt-1"},S={class:"mb-6"},$={class:"grid grid-cols-1 gap-4"},O={key:0,class:"text-red-500 text-sm mt-1"},Q={key:0,class:"text-red-500 text-sm mt-1"},Z={key:0,class:"text-red-500 text-sm mt-1"},q={class:"flex items-center justify-between"},J={class:"flex space-x-3"},K=["disabled"],rr={__name:"Edit",props:{user:Object},setup(y){var w,g;const c=C(),_=h(()=>{var o,t;return((t=(o=c.props.auth)==null?void 0:o.user)==null?void 0:t.is_admin)?P:T}),f=()=>{var o,t;const a=(t=(o=c.props.auth)==null?void 0:o.user)==null?void 0:t.is_admin;x.visit(a?"/admin/dashboard":"/home")},v=()=>{window.history.length>1?window.history.back():f()},b=y,r=V({name:((w=b.user)==null?void 0:w.name)||"",email:((g=b.user)==null?void 0:g.email)||"",current_password:"",password:"",password_confirmation:""}),k=()=>{if(r.clearErrors(),r.password){if(r.password.length<8){r.setError("password","La contraseña debe tener al menos 8 caracteres.");return}if(r.password!==r.password_confirmation){r.setError("password_confirmation","Las contraseñas no coinciden.");return}}const a=new FormData;a.append("name",r.name),a.append("email",r.email),r.current_password&&a.append("current_password",r.current_password),r.password&&a.append("password",r.password),r.password_confirmation&&a.append("password_confirmation",r.password_confirmation),a.append("_method","PATCH"),r.processing=!0,x.post("/profile",a,{onFinish:()=>{r.processing=!1,r.reset("password","current_password","password_confirmation")}})};return(a,o)=>(n(),d(F,null,[N(e(A),{title:"Perfil"}),(n(),E(D(_.value),null,{default:B(()=>[s("div",j,[s("div",z,[o[12]||(o[12]=s("div",{class:"px-6 py-4 border-b border-gray-100"},[s("h2",{class:"text-xl font-semibold text-gray-800"},"Editar Perfil"),s("p",{class:"text-sm text-gray-600 mt-1"},"Actualiza tu información personal")],-1)),s("div",G,[s("form",{onSubmit:U(k,["prevent"])},[s("div",H,[o[7]||(o[7]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Información Personal",-1)),s("div",I,[s("div",null,[o[5]||(o[5]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},"Nombre",-1)),m(s("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=t=>e(r).name=t),type:"text",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500",{"border-red-500":e(r).errors.name}])},null,2),[[u,e(r).name]]),e(r).errors.name?(n(),d("p",L,i(e(r).errors.name),1)):l("",!0)]),s("div",null,[o[6]||(o[6]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),m(s("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=t=>e(r).email=t),type:"email",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500",{"border-red-500":e(r).errors.email}])},null,2),[[u,e(r).email]]),e(r).errors.email?(n(),d("p",M,i(e(r).errors.email),1)):l("",!0)])])]),s("div",S,[o[11]||(o[11]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Cambiar Contraseña",-1)),s("div",$,[s("div",null,[o[8]||(o[8]=s("label",{for:"current_password",class:"block text-sm font-medium text-gray-700 mb-2"},"Contraseña Actual",-1)),m(s("input",{id:"current_password","onUpdate:modelValue":o[2]||(o[2]=t=>e(r).current_password=t),type:"password",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500",{"border-red-500":e(r).errors.current_password}])},null,2),[[u,e(r).current_password]]),e(r).errors.current_password?(n(),d("p",O,i(e(r).errors.current_password),1)):l("",!0)]),s("div",null,[o[9]||(o[9]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"Nueva Contraseña",-1)),m(s("input",{id:"password","onUpdate:modelValue":o[3]||(o[3]=t=>e(r).password=t),type:"password",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500",{"border-red-500":e(r).errors.password}])},null,2),[[u,e(r).password]]),e(r).errors.password?(n(),d("p",Q,i(e(r).errors.password),1)):l("",!0)]),s("div",null,[o[10]||(o[10]=s("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmar Nueva Contraseña",-1)),m(s("input",{id:"password_confirmation","onUpdate:modelValue":o[4]||(o[4]=t=>e(r).password_confirmation=t),type:"password",class:p(["w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-rose-500",{"border-red-500":e(r).errors.password_confirmation}])},null,2),[[u,e(r).password_confirmation]]),e(r).errors.password_confirmation?(n(),d("p",Z,i(e(r).errors.password_confirmation),1)):l("",!0)])])]),s("div",q,[s("button",{type:"button",onClick:f,class:"text-amber-600 hover:text-amber-700 font-medium flex items-center"}," ← Volver al Inicio "),s("div",J,[s("button",{type:"button",onClick:v,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md font-medium"}," Cancelar "),s("button",{type:"submit",disabled:e(r).processing,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 text-white rounded-md font-medium"},i(e(r).processing?"Guardando...":"Guardar Cambios"),9,K)])])],32)])])])]),_:1}))],64))}};export{rr as default};
