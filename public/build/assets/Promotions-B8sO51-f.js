import{r as x,a as U,c as W,o as K,g as a,d as l,e as T,u as R,Z as X,w as G,f as e,i as d,t as o,F as p,h as y,n as w,j as i,l as _,p as L,v as J,m as Q,N as P}from"./app-BYhsu56_.js";import{_ as ee}from"./AdminLayout-CYyKNtv3.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./HelpLink-0Gkg05qS.js";const se={class:"py-8"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"mb-8"},le={class:"flex flex-col md:flex-row md:items-center md:justify-between"},re={class:"flex space-x-4 mt-4 md:mt-0"},ne={class:"bg-amber-500 text-white rounded-xl px-4 py-3 shadow-lg"},ie={class:"font-bold text-xl"},de={class:"bg-blue-500 text-white rounded-xl px-4 py-3 shadow-lg"},ce={class:"font-bold text-xl"},me={key:0,class:"mb-6 p-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg shadow-lg"},ue={class:"flex items-center"},xe={class:"font-medium"},ve={key:1,class:"mb-6 p-4 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg shadow-lg"},be={class:"flex items-center"},ge={class:"font-medium"},pe={class:"mb-6"},fe={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-1"},he={class:"flex space-x-1"},ye=["onClick"],_e=["innerHTML"],we={class:"space-y-8"},Pe={key:0},ke={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},Ce={class:"p-6"},Ee={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Se={class:"space-y-4 max-h-[740px] overflow-y-auto pr-2 pl-2 pt-2"},je=["onClick"],Ae={class:"flex items-start space-x-4"},Me=["src","alt"],Ve={class:"flex-1 min-w-0"},Le={class:"font-semibold text-gray-900 text-lg mb-1"},We={class:"text-sm text-gray-600 mb-2 line-clamp-2"},De={class:"flex items-center justify-between"},Te={class:"text-xl font-bold text-amber-600"},Fe={class:"text-xs font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full"},ze={key:0,class:"text-center py-12 text-gray-400"},He={key:0,class:"space-y-6"},Ze={class:"bg-blue-50 rounded-xl p-5 border border-gray-200"},Ne={class:"flex items-center space-x-4"},Oe=["src","alt"],$e={class:"font-bold text-gray-900 text-lg"},Be={class:"text-sm text-gray-600"},qe={class:"text-xl font-bold text-amber-600 mt-1"},Ye={class:"grid grid-cols-2 sm:grid-cols-4 gap-3"},Ie=["onClick"],Ue={class:"text-xl font-bold"},Ke={class:"text-xs opacity-90 mt-1"},Re={class:"bg-white border-2 border-amber-200 rounded-xl p-5 shadow-lg"},Xe={class:"space-y-3"},Ge={class:"flex justify-between items-center"},Je={class:"text-gray-900 font-semibold text-lg"},Qe={class:"flex justify-between items-center"},et={class:"text-gray-600"},tt={class:"text-red-600 font-semibold text-lg"},st={class:"border-t border-amber-200 pt-3 mt-3"},ot={class:"flex justify-between items-center"},at={class:"text-green-600 font-bold text-xl"},lt={class:"space-y-4"},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nt=["disabled"],it={key:0,class:"flex items-center"},dt={key:1,class:"flex items-center text-lg"},ct={key:1,class:"flex items-center justify-center h-64 text-gray-400"},mt={key:1},ut={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},xt={class:"bg-amber-50 p-6 border-b border-amber-200"},vt={class:"text-xl font-bold text-gray-900 flex items-center"},bt={class:"ml-4 bg-gradient-to-r from-amber-500 to-orange-500 text-white text-sm font-bold px-3 py-1 rounded-full shadow-lg"},gt={class:"p-6"},pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ft={class:"bg-red-500 text-white px-4 py-3 text-sm font-bold text-center relative"},ht={class:"ml-2"},yt={class:"p-5"},_t={class:"flex items-start space-x-4 mb-4"},wt=["src","alt"],Pt={class:"flex-1 min-w-0"},kt={class:"font-bold text-gray-900 text-lg mb-1"},Ct={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full inline-block"},Et={class:"space-y-3 mb-5"},St={class:"flex justify-between items-center"},jt={class:"text-sm text-gray-500 line-through font-semibold"},At={class:"flex justify-between items-center"},Mt={class:"text-lg font-bold text-green-600"},Vt={class:"flex justify-between items-center text-sm rounded-lg"},Lt={class:"text-red-600 font-bold"},Wt={key:0,class:"text-xs text-gray-600 space-y-2 mb-5 bg-gray-50 p-3 rounded-lg"},Dt={key:0,class:"flex items-center"},Tt={class:"ml-1"},Ft={key:1,class:"flex items-center"},zt={class:"ml-1"},Ht={class:"flex space-x-3"},Zt=["onClick"],Nt=["onClick"],Ot={key:0,class:"col-span-full text-center py-16 text-gray-400"},$t={key:2},Bt={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},qt={class:"bg-amber-50 p-6 border-b border-amber-200"},Yt={class:"flex items-center justify-between"},It=["disabled"],Ut={key:0,class:"flex items-center"},Kt={key:1,class:"flex items-center"},Rt={class:"p-6"},Xt={class:"overflow-x-auto rounded-xl shadow-inner"},Gt={class:"w-full"},Jt={class:"divide-y divide-gray-100"},Qt={class:"py-4 px-6"},es={class:"flex items-center space-x-4"},ts={class:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center shadow-sm"},ss={class:"text-xl"},os={class:"font-semibold text-gray-900"},as={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full mt-1"},ls={class:"py-4 px-6"},rs={class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-gradient-to-r from-red-100 to-pink-100 text-red-800 shadow-sm"},ns={class:"py-4 px-6"},is={class:"space-y-1"},ds={class:"text-sm text-gray-500 line-through"},cs={class:"text-lg font-bold text-green-600"},ms={class:"py-4 px-6 text-sm text-gray-600"},us={key:0,class:"flex items-center mb-1"},xs={key:1,class:"flex items-center text-xs text-gray-500"},vs={key:2,class:"text-xs text-gray-400"},bs={class:"py-4 px-6"},gs={class:"py-4 px-6"},ps=["onClick"],fs={key:0,class:"text-center py-16 text-gray-400"},hs={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},ys={class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100"},_s={class:"p-6"},ws={key:0,class:"space-y-6"},Ps={class:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 border border-gray-200"},ks={class:"flex items-center space-x-4"},Cs=["src","alt"],Es={class:"font-bold text-gray-900 text-lg"},Ss={class:"text-sm text-gray-600"},js={class:"space-y-4"},As=["value"],Ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vs={class:"flex items-center space-x-3"},Ls={class:"p-6 border-t border-gray-200 bg-gray-50 rounded-b-2xl flex justify-end space-x-4"},Ws=["disabled"],Ds={key:0,class:"flex items-center"},Ts={key:1},Fs={__name:"Promotions",props:{productsWithPromotions:{type:Array,default:()=>[]},productsWithoutPromotions:{type:Array,default:()=>[]},allPromotions:{type:Array,default:()=>[]},discountOptions:{type:Array,default:()=>[]}},setup(u){const k=u,f=x("add"),n=x(null),h=x(20),C=x(""),E=x(""),S=x(!1),v=x(""),c=x(""),j=x(!1),b=x(null),A=x(!1),M=x(!1),m=U({discount_percentage:20,start_date:"",end_date:"",is_active:!0}),F=W(()=>[{id:"add",name:"Agregar PromociÃ³n",count:k.productsWithoutPromotions.length},{id:"active",name:"Promociones Activas",count:k.productsWithPromotions.length},{id:"history",name:"Historial",count:k.allPromotions.length}]),D=W(()=>n.value?n.value.price*h.value/100:0),z=W(()=>n.value?n.value.price-D.value:0),H=r=>{switch(r){case"add":return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
  <path fill-rule="evenodd" d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
</svg>`;case"active":return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
  <path fill-rule="evenodd" d="M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z" clip-rule="evenodd" />
</svg>`;case"history":return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
  <path fill-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm4.5 7.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0v-2.25a.75.75 0 0 1 .75-.75Zm3.75-1.5a.75.75 0 0 0-1.5 0v4.5a.75.75 0 0 0 1.5 0V12Zm2.25-3a.75.75 0 0 1 .75.75v6.75a.75.75 0 0 1-1.5 0V9.75A.75.75 0 0 1 13.5 9Zm3.75-1.5a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z" clip-rule="evenodd" />
</svg>`;default:return"ðŸ“¦"}},Z=r=>({CafÃ©:"â˜•",TÃ©:"ðŸµ",Postres:"ðŸ°",Desayunos:"ðŸ¥",Ensaladas:"ðŸ¥—",Bebidas:"ðŸ§ƒ",Snacks:"ðŸ«",PanaderÃ­a:"ðŸ¥–"})[r]||"ðŸ“¦",N=r=>{n.value=r},O=async()=>{if(n.value){S.value=!0,c.value="",v.value="";try{const t=await(await fetch("/admin/promotions/add",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({product_id:n.value.id,discount_percentage:h.value,start_date:C.value||null,end_date:E.value||null})})).json();t.success?(v.value=`PromociÃ³n aplicada exitosamente a ${n.value.name}`,P.reload({only:["productsWithPromotions","productsWithoutPromotions","allPromotions"]}),n.value=null,C.value="",E.value=""):c.value=t.message}catch(r){c.value="Error al aplicar la promociÃ³n. Por favor, intenta nuevamente.",console.error("Error:",r)}finally{S.value=!1}}},$=r=>{b.value=r,r.promotion_data&&(m.discount_percentage=r.promotion_data.discount_percentage,m.start_date=r.promotion_data.start_date?new Date(r.promotion_data.start_date).toISOString().slice(0,16):"",m.end_date=r.promotion_data.end_date?new Date(r.promotion_data.end_date).toISOString().slice(0,16):"",m.is_active=r.promotion_data.is_active),j.value=!0},B=async()=>{if(!(!b.value||!b.value.promotion_data)){A.value=!0;try{const t=await(await fetch(`/admin/promotions/${b.value.promotion_data.id}/update`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(m)})).json();t.success?(v.value="PromociÃ³n actualizada exitosamente",j.value=!1,P.reload({only:["productsWithPromotions","productsWithoutPromotions","allPromotions"]})):c.value=t.message}catch(r){c.value="Error al actualizar la promociÃ³n. Por favor, intenta nuevamente.",console.error("Error:",r)}finally{A.value=!1}}},q=async r=>{if(confirm(`Â¿EstÃ¡s seguro de que quieres eliminar la promociÃ³n de "${r.name}"?`))try{const s=await(await fetch(`/admin/promotions/${r.promotion_data.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json();s.success?(v.value=`PromociÃ³n eliminada exitosamente de ${r.name}`,P.reload({only:["productsWithPromotions","productsWithoutPromotions","allPromotions"]})):c.value=s.message}catch(t){c.value="Error al eliminar la promociÃ³n. Por favor, intenta nuevamente.",console.error("Error:",t)}},Y=async r=>{if(confirm("Â¿EstÃ¡s seguro de que quieres eliminar esta promociÃ³n del historial?"))try{const s=await(await fetch(`/admin/promotions/${r.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json();s.success?(v.value="PromociÃ³n eliminada del historial",P.reload({only:["productsWithPromotions","productsWithoutPromotions","allPromotions"]})):c.value=s.message}catch(t){c.value="Error al eliminar la promociÃ³n del historial. Por favor, intenta nuevamente.",console.error("Error:",t)}},I=async()=>{if(confirm("Â¿EstÃ¡s seguro de que quieres limpiar todo el historial de promociones? Esta acciÃ³n no se puede deshacer.")){M.value=!0;try{const r=k.allPromotions.filter(t=>!t.is_currently_active);for(const t of r)await fetch(`/admin/promotions/${t.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}});v.value=`Historial limpiado exitosamente (${r.length} promociones eliminadas)`,P.reload({only:["productsWithPromotions","productsWithoutPromotions","allPromotions"]})}catch(r){c.value="Error al limpiar el historial. Por favor, intenta nuevamente.",console.error("Error:",r)}finally{M.value=!1}}},V=r=>r?new Date(r).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):"";return K(()=>{setInterval(()=>{v.value&&(v.value=""),c.value&&(c.value="")},5e3)}),(r,t)=>(l(),a(p,null,[T(R(X),{title:"Promociones"}),T(ee,null,{default:G(()=>[e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[t[9]||(t[9]=e("div",{class:"flex items-center space-x-4"},[e("div",{class:"bg-amber-100 p-3 rounded-xl"},[e("span",{class:"text-2xl"},"ðŸ”¥")]),e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"GestiÃ³n de Promociones"),e("p",{class:"text-gray-600 mt-1"}," Administra descuentos especiales y ofertas de tus productos ")])],-1)),e("div",re,[e("div",ne,[e("div",ie,o(u.productsWithPromotions.length),1),t[7]||(t[7]=e("div",{class:"text-amber-100 text-sm"},"En PromociÃ³n",-1))]),e("div",de,[e("div",ce,o(u.productsWithoutPromotions.length),1),t[8]||(t[8]=e("div",{class:"text-blue-100 text-sm"},"Disponibles",-1))])])])]),v.value?(l(),a("div",me,[e("div",ue,[t[10]||(t[10]=e("span",{class:"text-xl mr-3"},"âœ…",-1)),e("span",xe,o(v.value),1)])])):d("",!0),c.value?(l(),a("div",ve,[e("div",be,[t[11]||(t[11]=e("span",{class:"text-xl mr-3"},"âŒ",-1)),e("span",ge,o(c.value),1)])])):d("",!0),e("div",pe,[e("div",fe,[e("nav",he,[(l(!0),a(p,null,y(F.value,s=>(l(),a("button",{key:s.id,onClick:g=>f.value=s.id,class:w(["flex-1 py-3 px-4 text-sm font-medium rounded-md transition-all duration-200 flex items-center justify-center",f.value===s.id?"bg-amber-500 text-white shadow-lg":"text-gray-600 hover:text-amber-600 hover:bg-amber-50"])},[e("span",{class:"mr-2",innerHTML:H(s.id)},null,8,_e),i(" "+o(s.name)+" ",1),s.count!==null&&s.count>0?(l(),a("span",{key:0,class:w(["ml-2 py-0.5 px-2 text-xs rounded-full font-bold",f.value===s.id?"bg-white text-amber-600":"bg-amber-100 text-amber-800"])},o(s.count),3)):d("",!0)],10,ye))),128))])])]),e("div",we,[f.value==="add"?(l(),a("div",Pe,[e("div",ke,[t[23]||(t[23]=e("div",{class:"bg-yellow-50 p-6 border-b border-amber-200"},[e("h2",{class:"text-xl font-bold text-gray-900 flex items-center"},[e("span",{class:"mr-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])]),i(" Agregar Nueva PromociÃ³n ")]),e("p",{class:"text-amber-700 text-sm mt-1"}," Selecciona un producto y aplica un descuento especial para atraer mÃ¡s clientes ")],-1)),e("div",Ce,[e("div",Ee,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-4"},[i(" ðŸ“¦ Seleccionar Producto "),e("span",{class:"text-amber-600 ml-1"},"*")],-1)),e("div",Se,[(l(!0),a(p,null,y(u.productsWithoutPromotions,s=>{var g;return l(),a("div",{key:s.id,onClick:zs=>N(s),class:w(["p-4 border-2 rounded-xl cursor-pointer transition-all duration-300 transform hover:scale-[1.02]",((g=n.value)==null?void 0:g.id)===s.id?"border-amber-500 bg-gradient-to-r from-amber-50 to-orange-50 ring-4 ring-amber-200 shadow-lg":"border-gray-200 bg-white hover:border-amber-300 hover:shadow-md"])},[e("div",Ae,[e("img",{src:s.image_url,alt:s.name,class:"w-20 h-20 object-cover rounded-lg flex-shrink-0 border border-gray-200"},null,8,Me),e("div",Ve,[e("h3",Le,o(s.name),1),e("p",We,o(s.description),1),e("div",De,[e("span",Te," â‚² "+o(s.price.toLocaleString("es-PY")),1),e("span",Fe,o(s.category_name),1)])])])],10,je)}),128)),u.productsWithoutPromotions.length===0?(l(),a("div",ze,[...t[12]||(t[12]=[e("div",{class:"text-6xl mb-4"},"ðŸŽ‰",-1),e("p",{class:"text-lg font-semibold text-gray-600 mb-2"},"Â¡Todos los productos tienen promociones!",-1),e("p",{class:"text-sm"},'Gestiona las promociones existentes en la pestaÃ±a "Promociones Activas"',-1)])])):d("",!0)])]),n.value?(l(),a("div",He,[e("div",Ze,[e("div",Ne,[e("img",{src:n.value.image_url,alt:n.value.name,class:"w-16 h-16 object-cover rounded-xl border-1 border-amber-300"},null,8,Oe),e("div",null,[e("h3",$e,o(n.value.name),1),e("p",Be,o(n.value.category_name),1),e("p",qe," â‚² "+o(n.value.price.toLocaleString("es-PY")),1)])])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-4"},[i(" ðŸ·ï¸ Porcentaje de Descuento "),e("span",{class:"text-amber-600 ml-1"},"*")],-1)),e("div",Ye,[(l(!0),a(p,null,y(u.discountOptions,s=>(l(),a("button",{key:s.value,onClick:g=>h.value=s.value,class:w(["p-4 border-2 rounded-xl text-center transition-all duration-200 transform hover:scale-105",h.value===s.value?"border-amber-500 bg-amber-500 text-white shadow-lg":"border-gray-200 bg-white text-gray-700 hover:border-amber-300 hover:shadow-md"])},[e("div",Ue,o(s.value)+"%",1),e("div",Ke,o(s.label),1)],10,Ie))),128))])]),e("div",Re,[t[17]||(t[17]=e("h4",{class:"font-semibold text-gray-900 mb-4 flex items-center"}," Vista Previa del Precio ",-1)),e("div",Xe,[e("div",Ge,[t[15]||(t[15]=e("span",{class:"text-gray-600"},"Precio original:",-1)),e("span",Je," â‚² "+o(n.value.price.toLocaleString("es-PY")),1)]),e("div",Qe,[e("span",et,"Descuento ("+o(h.value)+"%):",1),e("span",tt," -â‚² "+o(D.value.toLocaleString("es-PY")),1)]),e("div",st,[e("div",ot,[t[16]||(t[16]=e("span",{class:"text-gray-900 font-bold text-lg"},"Precio promocional:",-1)),e("span",at," â‚² "+o(z.value.toLocaleString("es-PY")),1)])])])]),e("div",lt,[e("div",rt,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," ðŸ• Fecha de inicio (opcional) ",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),type:"datetime-local",class:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200"},null,512),[[L,C.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," ðŸ• Fecha de fin (opcional) ",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>E.value=s),type:"datetime-local",class:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200"},null,512),[[L,E.value]])])])]),e("button",{onClick:O,disabled:S.value,class:"w-full bg-amber-700 hover:bg-amber-900 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:scale-100 shadow-lg hover:shadow-xl disabled:shadow-none flex items-center justify-center"},[S.value?(l(),a("span",it,[...t[20]||(t[20]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" Aplicando promociÃ³n... ",-1)])])):(l(),a("span",dt,[t[21]||(t[21]=e("span",{class:"mr-3 text-xl"},"ðŸ”¥",-1)),i(" Aplicar "+o(h.value)+"% de Descuento ",1)]))],8,nt)])):(l(),a("div",ct,[...t[22]||(t[22]=[e("div",{class:"text-center"},[e("div",{class:"text-6xl mb-4"},"ðŸ‘†"),e("p",{class:"text-lg font-semibold text-gray-600"},"Selecciona un producto"),e("p",{class:"text-sm mt-1"},"Elige un producto de la lista para configurar la promociÃ³n")],-1)])]))])])])])):d("",!0),f.value==="active"?(l(),a("div",mt,[e("div",ut,[e("div",xt,[e("h2",vt,[t[24]||(t[24]=e("span",{class:"mr-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[e("path",{"fill-rule":"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z","clip-rule":"evenodd"})])],-1)),t[25]||(t[25]=i(" Promociones Activas ",-1)),e("span",bt,o(u.productsWithPromotions.length)+" activas ",1)]),t[26]||(t[26]=e("p",{class:"text-amber-700 text-sm mt-1"}," Selecciona un producto y edita los campos de: fecha y porcentaje de descuento ",-1))]),e("div",gt,[e("div",pt,[(l(!0),a(p,null,y(u.productsWithPromotions,s=>(l(),a("div",{key:s.id,class:"border-2 border-gray-200 rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] bg-white"},[e("div",ft,[t[27]||(t[27]=e("span",{class:"text-lg"},"ðŸ·ï¸",-1)),e("span",ht,o(s.discount_percentage)+"% OFF",1),t[28]||(t[28]=e("div",{class:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-red-600 rotate-45"},null,-1))]),e("div",yt,[e("div",_t,[e("img",{src:s.image_url,alt:s.name,class:"w-20 h-20 object-cover rounded-xl border-1 border-amber-300 flex-shrink-0"},null,8,wt),e("div",Pt,[e("h3",kt,o(s.name),1),e("p",Ct,o(s.category_name),1)])]),e("div",Et,[e("div",St,[t[29]||(t[29]=e("span",{class:"text-sm text-gray-600"},"Precio original:",-1)),e("span",jt," â‚² "+o(s.price.toLocaleString("es-PY")),1)]),e("div",At,[t[30]||(t[30]=e("span",{class:"text-sm text-gray-600"},"Precio promocional:",-1)),e("span",Mt," â‚² "+o(s.promotional_price.toLocaleString("es-PY")),1)]),e("div",Vt,[t[31]||(t[31]=e("span",{class:"text-gray-700 font-semibold"},"Ahorro:",-1)),e("span",Lt," -â‚² "+o(s.savings_amount.toLocaleString("es-PY")),1)])]),s.promotion_data?(l(),a("div",Wt,[s.promotion_data.start_date?(l(),a("div",Dt,[t[32]||(t[32]=e("span",{class:"text-amber-600 mr-2"},"ðŸ“…",-1)),t[33]||(t[33]=e("span",{class:"font-medium"},"Inicio:",-1)),e("span",Tt,o(V(s.promotion_data.start_date)),1)])):d("",!0),s.promotion_data.end_date?(l(),a("div",Ft,[t[34]||(t[34]=e("span",{class:"text-amber-600 mr-2"},"â°",-1)),t[35]||(t[35]=e("span",{class:"font-medium"},"Fin:",-1)),e("span",zt,o(V(s.promotion_data.end_date)),1)])):d("",!0)])):d("",!0),e("div",Ht,[e("button",{onClick:g=>$(s),class:"flex-1 bg-blue-500 hover:bg-blue-800 text-white py-3 px-4 rounded-xl text-sm font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center"},[...t[36]||(t[36]=[e("span",{class:"mr-2"},"âœï¸",-1),i(" Editar ",-1)])],8,Zt),e("button",{onClick:g=>q(s),class:"flex-1 bg-red-500 hover:bg-red-800 text-white py-3 px-4 rounded-xl text-sm font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center"},[...t[37]||(t[37]=[e("span",{class:"mr-2"},"ðŸ—‘ï¸",-1),i(" Eliminar ",-1)])],8,Nt)])])]))),128)),u.productsWithPromotions.length===0?(l(),a("div",Ot,[...t[38]||(t[38]=[e("div",{class:"text-8xl mb-6"},"ðŸ˜´",-1),e("p",{class:"text-2xl font-bold text-gray-600 mb-3"},"No hay promociones activas",-1),e("p",{class:"text-gray-500"},'Agrega tu primera promociÃ³n en la pestaÃ±a "Agregar PromociÃ³n"',-1)])])):d("",!0)])])])])):d("",!0),f.value==="history"?(l(),a("div",$t,[e("div",Bt,[e("div",qt,[e("div",Yt,[t[41]||(t[41]=e("div",{class:"flex flex-col"},[e("h2",{class:"text-xl font-bold text-gray-900 flex items-center"},[e("span",{class:"mr-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-6"},[e("path",{"fill-rule":"evenodd",d:"M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm4.5 7.5a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0v-2.25a.75.75 0 0 1 .75-.75Zm3.75-1.5a.75.75 0 0 0-1.5 0v4.5a.75.75 0 0 0 1.5 0V12Zm2.25-3a.75.75 0 0 1 .75.75v6.75a.75.75 0 0 1-1.5 0V9.75A.75.75 0 0 1 13.5 9Zm3.75-1.5a.75.75 0 0 0-1.5 0v9a.75.75 0 0 0 1.5 0v-9Z","clip-rule":"evenodd"})])]),i(" Historial de Promociones ")]),e("p",{class:"text-amber-700 text-sm mt-1"}," Visualiza todas las promociones aplicadas alguna vez ")],-1)),e("button",{onClick:I,disabled:M.value,class:"bg-red-500 hover:bg-red-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 flex items-center"},[M.value?(l(),a("span",Ut,[...t[39]||(t[39]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" Limpiando... ",-1)])])):(l(),a("span",Kt,[...t[40]||(t[40]=[e("span",{class:"mr-2"},"ðŸ§¹",-1),i(" Limpiar Historial ",-1)])]))],8,It)])]),e("div",Rt,[e("div",Xt,[e("table",Gt,[t[45]||(t[45]=e("thead",null,[e("tr",{class:"bg-amber-50"},[e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Producto"),e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Descuento"),e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Precios"),e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Fechas"),e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Estado"),e("th",{class:"text-left py-4 px-6 text-sm font-bold text-gray-700 border-b border-amber-200"},"Acciones")])],-1)),e("tbody",Jt,[(l(!0),a(p,null,y(u.allPromotions,s=>(l(),a("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",Qt,[e("div",es,[e("div",ts,[e("span",ss,o(Z(s.category_name)),1)]),e("div",null,[e("div",os,o(s.product_name),1),e("div",as,o(s.category_name),1)])])]),e("td",ls,[e("span",rs," ðŸ·ï¸ "+o(s.discount_percentage)+"% OFF ",1)]),e("td",ns,[e("div",is,[e("div",ds," â‚² "+o(s.original_price.toLocaleString("es-PY")),1),e("div",cs," â‚² "+o(s.promotional_price.toLocaleString("es-PY")),1)])]),e("td",ms,[s.start_date?(l(),a("div",us,[t[42]||(t[42]=e("span",{class:"text-amber-600 mr-2"},"ðŸ“…",-1)),i(" "+o(V(s.start_date)),1)])):d("",!0),s.end_date?(l(),a("div",xs,[t[43]||(t[43]=e("span",{class:"text-amber-600 mr-2"},"â°",-1)),i(" hasta "+o(V(s.end_date)),1)])):(l(),a("div",vs,"Sin fecha de fin"))]),e("td",bs,[e("span",{class:w(["inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-sm",s.is_currently_active?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800":"bg-gradient-to-r from-gray-100 to-blue-100 text-gray-800"])},o(s.is_currently_active?"ðŸŸ¢ Activa":"âš« Inactiva"),3)]),e("td",gs,[e("button",{onClick:g=>Y(s),class:"text-red-600 hover:text-red-800 transition-colors duration-200 p-2 rounded-lg hover:bg-red-50",title:"Eliminar del historial"},[...t[44]||(t[44]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ps)])]))),128))])]),u.allPromotions.length===0?(l(),a("div",fs,[...t[46]||(t[46]=[e("div",{class:"text-8xl mb-6"},"ðŸ“",-1),e("p",{class:"text-2xl font-bold text-gray-600 mb-3"},"No hay historial de promociones",-1),e("p",{class:"text-gray-500"},"Las promociones que crees aparecerÃ¡n aquÃ­",-1)])])):d("",!0)])])])])):d("",!0)])])]),j.value?(l(),a("div",hs,[e("div",ys,[t[52]||(t[52]=e("div",{class:"bg-blue-500 p-6 rounded-t-2xl"},[e("h3",{class:"text-xl font-bold text-white flex items-center"},[e("span",{class:"text-2xl mr-3"},"âœï¸"),i(" Editar PromociÃ³n ")]),e("p",{class:"text-blue-100 mt-1"},"Modifica los detalles de la promociÃ³n seleccionada")],-1)),e("div",_s,[b.value?(l(),a("div",ws,[e("div",Ps,[e("div",ks,[e("img",{src:b.value.image_url,alt:b.value.name,class:"w-16 h-16 object-cover rounded-xl border-2 border-amber-300"},null,8,Cs),e("div",null,[e("h4",Es,o(b.value.name),1),e("p",Ss,o(b.value.category_name),1)])])]),e("div",js,[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," Porcentaje de Descuento ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.discount_percentage=s),class:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-blue-500 focus:border-blue-500"},[(l(!0),a(p,null,y(u.discountOptions,s=>(l(),a("option",{key:s.value,value:s.value},o(s.value)+"% - "+o(s.label),9,As))),128))],512),[[J,m.discount_percentage]])]),e("div",Ms,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," Fecha de inicio ",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.start_date=s),type:"datetime-local",class:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,m.start_date]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-semibold text-gray-700 mb-2"}," Fecha de fin ",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>m.end_date=s),type:"datetime-local",class:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-blue-500 focus:border-blue-500"},null,512),[[L,m.end_date]])])]),e("div",null,[e("label",Vs,[_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.is_active=s),type:"checkbox",class:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"},null,512),[[Q,m.is_active]]),t[50]||(t[50]=e("span",{class:"text-sm font-semibold text-gray-700"},"PromociÃ³n activa",-1))])])])])):d("",!0)]),e("div",Ls,[e("button",{onClick:t[6]||(t[6]=s=>j.value=!1),class:"px-6 py-3 text-gray-600 hover:text-gray-800 font-semibold rounded-xl transition-colors duration-200 hover:bg-gray-200"}," Cancelar "),e("button",{onClick:B,disabled:A.value,class:"px-6 py-3 bg-blue-500 hover:bg-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl transition-all duration-200 transform hover:scale-105 disabled:scale-100 shadow-lg hover:shadow-xl flex items-center"},[A.value?(l(),a("span",Ds,[...t[51]||(t[51]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" Guardando... ",-1)])])):(l(),a("span",Ts,"ðŸ’¾ Guardar Cambios"))],8,Ws)])])])):d("",!0)]),_:1})],64))}},$s=te(Fs,[["__scopeId","data-v-68433cef"]]);export{$s as default};
