import{r as v,s as se,g as d,d as u,e as ae,u as je,Z as Me,w as Ne,f as e,i as p,t as n,F as G,h as J,n as V,l as D,m as Se,j as w,k as Pe,p as q,y as Te,v as Le,N as M,x as le,z as ne}from"./app-BYhsu56_.js";import{_ as De}from"./AdminLayout-CYyKNtv3.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./HelpLink-0Gkg05qS.js";const $e={class:"py-12"},ze={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Fe={class:"mb-6 flex justify-center space-x-4"},He=["disabled"],Ae=["disabled"],Ve={key:0,class:"text-center py-8"},qe={key:1,class:"text-center py-8"},Re={class:"text-red-600 font-medium"},Ie={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ue={class:"relative aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg overflow-hidden"},Oe=["src","alt","onError"],Ge={class:"absolute top-2 left-2 cursor-pointer"},Xe=["value"],Ke={class:"p-4"},Je={class:"text-lg font-semibold text-gray-900 mb-2"},We={class:"text-gray-600 text-sm mb-3 line-clamp-2"},Qe={class:"flex items-center justify-between mb-4"},Ye={class:"text-2xl font-bold text-amber-600"},Ze={class:"text-sm text-gray-500"},eo={class:"flex space-x-2"},oo=["onClick"],to=["onClick","disabled"],ro={key:3,class:"text-center py-12"},so={class:"mt-6 flex justify-center space-x-4"},ao={key:0,class:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50"},lo={class:"bg-blue-600 text-white px-6 py-4 rounded-lg shadow-lg flex items-center space-x-4 animate-pulse border-2 border-blue-400"},no={class:"flex items-center space-x-3"},io={class:"font-medium"},uo=["disabled"],co=["disabled"],vo={key:4,class:"fixed inset-0 bg-gray-600/50 backdrop-blur-sm flex items-start justify-center p-4 z-50 overflow-y-auto"},mo={class:"relative w-full max-w-3xl bg-white rounded-xl shadow-2xl overflow-hidden my-8 transition-all duration-300"},po={class:"bg-gradient-to-r from-amber-600 to-amber-700 text-white p-6 relative overflow-hidden"},go={class:"relative z-10"},fo={class:"text-2xl font-bold flex items-center"},bo={class:"mr-2"},xo={class:"text-amber-100 text-sm mt-1"},ho={class:"space-y-1.5"},yo={class:"block text-sm font-medium text-gray-700"},wo={class:"text-xs text-gray-500 float-right"},ko={class:"relative"},Co={key:0,class:"text-xs text-amber-600"},_o={class:"space-y-1.5"},Eo={class:"block text-sm font-medium text-gray-700"},jo={class:"text-xs text-gray-500 float-right"},Mo={key:0,class:"text-xs text-amber-600"},No={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},So={class:"space-y-1.5"},Po={class:"relative"},To={class:"space-y-1.5"},Lo={class:"space-y-1.5"},Do={class:"flex justify-between items-center"},Bo={class:"flex space-x-2"},$o={key:0,class:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},zo={class:"flex justify-between items-center mb-3"},Fo={class:"text-sm font-medium text-gray-700"},Ho={class:"flex space-x-2"},Ao=["disabled"],Vo=["title"],qo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ro={class:"space-y-3"},Io={class:"flex flex-wrap gap-2 border border-gray-200 rounded-lg p-2 bg-white"},Uo=["onClick","title"],Oo={class:"flex flex-col justify-between"},Go={class:"flex items-center p-3 bg-white border border-gray-200 rounded-lg"},Xo={class:"text-2xl mr-2"},Ko={class:"font-medium"},Jo=["disabled"],Wo={class:"relative"},Qo=["value"],Yo={key:1,class:"mt-1 text-xs text-red-500"},Zo={class:"space-y-1.5"},et={class:"mt-1 flex items-center"},ot={class:"cursor-pointer"},tt={class:"flex items-center px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},rt={class:"text-sm text-gray-600"},st={key:0,class:"mt-3"},at={class:"relative inline-block"},lt=["src"],nt={class:"pt-4 border-t border-gray-100"},it={class:"flex justify-end space-x-3"},dt=["disabled"],ut={key:0,class:"flex items-center"},ct={key:1,class:"flex items-center"},vt={key:2},mt={key:0,class:"mt-3 text-sm text-red-600 text-right"},pt={__name:"Products",props:{products:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]}},setup(ie){const F=v(!1),de=(s,o="Confirmar")=>new Promise(r=>{window.confirm(`${o}

${s}`)?r(!0):r(!1)}),k=ie,C=v(k.products),W=v(k.categories),ue=v(!1),B=v(""),R=v(!1),b=v(!1),x=v(!1),Q=v(null),S=v(null),I=v(null),$=v(!1),z=v(!1),E=v(!1),N=v(!1),g=v([]),P=v(!1),f=v(null),H=v(5),y=v(null),i=v({id:null,name:"",emoji:"‚òï",showForm:!1}),A=v(["‚òï","üçµ","üç∞","ü•ê","ü•ó","üßÉ","üç´","üç©","üç™","ü•§","üç∑","üç∫","ü•Ç","üçπ","üç∏","ü•É","üçæ","üç∂","üçº","üçª","üßã","üßâ","üßä","üçΩÔ∏è","üç¥","ü•Ñ","üî™","üè∫","üì¶"]),ce={"‚òï":"Caf√©","üçµ":"T√©","üç∞":"Pastel","ü•ê":"Croissant","ü•ó":"Ensalada","üßÉ":"Jugo","üç´":"Chocolate","üç©":"Donut","üç™":"Galleta","ü•§":"Bebida","üç∑":"Vino","üç∫":"Cerveza","ü•Ç":"Brindis","üçπ":"C√≥ctel","üç∏":"C√≥ctel","ü•É":"Whisky","üçæ":"Champ√°n","üç∂":"Sake","üçº":"Biber√≥n","üçª":"Cervezas","üßã":"T√© de burbujas","üßâ":"Mate","üßä":"Hielo","üçΩÔ∏è":"Cubiertos","üç¥":"Cubiertos","ü•Ñ":"Cuchara","üî™":"Cuchillo","üè∫":"Jarr√≥n","üì¶":"Caja"},X=s=>A.value[s]||"üì¶",ve=s=>{const o=X(s);return ce[o]||"Otro"},t=v({id:null,name:"",description:"",price:1e3,stock:0,category:"",image:null,_method:"post",image_url:null,remove_image:!1}),m=v("");se(()=>k.products,s=>{C.value=s||[],g.value=[],!P.value&&!f.value&&y.value&&(clearTimeout(y.value),y.value=null)});const me=()=>{if(t.value.price===""||t.value.price===null)return;let s=parseFloat(t.value.price);if(isNaN(s)){t.value.price=1e3;return}s<1e3?t.value.price=1e3:s>1e5?t.value.price=1e5:t.value.price=Math.round(s/100)*100,E.value=!0},pe=s=>{const o=s.target.files[0];if(!o)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(o.type)){alert("Formato de imagen no v√°lido. Use JPEG, PNG, GIF o WebP.");return}if(o.size>10*1024*1024){alert("La imagen no debe superar los 10MB");return}t.value.image=o,S.value=URL.createObjectURL(o),E.value=!0,s.target.value=""},ge=()=>{t.value.image=null,t.value.image_url=null,S.value=null,E.value=!0,t.value.id&&(t.value.remove_image=!0)},fe=s=>{var r;Q.value=s;const o=s.category_id||((r=s.category)==null?void 0:r.id)||"";t.value={id:s.id,name:s.name,description:s.description||"",price:s.price,stock:s.stock,category:o?o.toString():"",image:null,_method:"put",image_url:s.image_url,remove_image:!1},le(()=>{t.value.category=o?o.toString():"",o&&!k.categories.some(a=>a.id.toString()===o.toString())&&console.warn(`La categor√≠a con ID ${o} no se encuentra en la lista de categor√≠as disponibles`)}),S.value=s.image_url||null,b.value=!0,E.value=!1,N.value=!1,window.scrollTo({top:0,behavior:"smooth"}),console.log("Editando producto:",s),console.log("Categor√≠as disponibles:",k.categories),console.log("Categor√≠a seleccionada:",t.value.category)},be=async()=>{m.value="",x.value=!0,N.value=!1;try{if(!t.value.name||t.value.name.trim()===""){m.value="El nombre del producto es obligatorio",x.value=!1;return}if(t.value.name.length>50){m.value="El nombre no puede tener m√°s de 50 caracteres",x.value=!1;return}if(!t.value.description||t.value.description.trim()===""){m.value="La descripci√≥n es obligatoria",x.value=!1;return}if(t.value.description.length>200){m.value="La descripci√≥n no puede tener m√°s de 200 caracteres",x.value=!1;return}if(!t.value.price||t.value.price<1e3||t.value.price>1e5){m.value="El precio debe estar entre ‚Ç≤ 1,000 y ‚Ç≤ 100,000",x.value=!1;return}if(t.value.stock===""||t.value.stock<0||t.value.stock>1e3){m.value="El stock debe estar entre 0 y 1,000 unidades",x.value=!1;return}if(!t.value.category){m.value="Debe seleccionar una categor√≠a",x.value=!1;return}const s=b.value?`/admin/products/${t.value.id}`:"/admin/products",o=new FormData;for(const a in t.value)t.value[a]!==null&&t.value[a]!==void 0&&(a==="price"||a==="stock"?o.append(a,Number(t.value[a])):a==="image"&&t.value[a]instanceof File?o.append("image",t.value[a]):a==="remove_image"&&t.value[a]===!0?o.append("remove_image","1"):a==="category"?o.append("category",t.value[a]):a!=="image_url"&&a!=="id"&&o.append(a,t.value[a]));const r=b.value?"put":"post";b.value&&o.append("_method","PUT"),await M.post(s,o,{onSuccess:()=>{N.value=!0,E.value=!1,setTimeout(()=>{te()},1500)},onError:a=>{if(a.message)m.value=a.message;else if(a.errors){const c=Object.values(a.errors)[0][0];m.value=c}else m.value=b.value?"Error al actualizar el producto. Por favor, verifica los datos.":"Error al crear el producto. Por favor, verifica los datos."},onFinish:()=>{x.value=!1},forceFormData:!0,preserveScroll:!0})}catch(s){console.error("Error al guardar el producto:",s),m.value="Ocurri√≥ un error inesperado al guardar el producto. Por favor, intente nuevamente.",x.value=!1}},xe=async s=>{I.value=s;try{const o=C.value.find(r=>r.id===s);f.value={type:"selected",products:[o],timestamp:Date.now()},await M.post(`/admin/products/${s}`,{_method:"DELETE"},{preserveScroll:!0,onSuccess:()=>{K(),M.reload({only:["products"]})},onError:()=>{B.value="No se pudo eliminar el producto",f.value=null}})}finally{I.value=null}},Y=async()=>{if(C.value.length===0)return;const s=`¬øEst√°s COMPLETAMENTE SEGURO de que quieres eliminar TODOS los productos (${C.value.length})? Esta acci√≥n no se puede deshacer f√°cilmente.`;if(confirm(s)){z.value=!0;try{f.value={type:"all",products:[...C.value],timestamp:Date.now()},await M.post("/admin/products/delete-all",{},{preserveScroll:!0,onSuccess:()=>{K(),g.value=[],M.reload({only:["products"]})},onError:o=>{B.value="No se pudieron eliminar todos los productos",f.value=null,console.error("Error details:",o)}})}finally{z.value=!1}}},Z=async()=>{if(f.value){P.value=!1,y.value&&(clearTimeout(y.value),y.value=null);try{await M.post("/admin/products/restore",{undo_data:f.value},{preserveScroll:!0,onSuccess:()=>{M.reload({only:["products"]}),f.value=null},onError:()=>{B.value="No se pudieron restaurar los productos"}})}catch(s){console.error("Error al restaurar productos:",s)}}},K=()=>{P.value=!0,H.value=5,le(()=>{const s=()=>{H.value--,H.value>0?y.value=setTimeout(s,1e3):(P.value=!1,f.value=null,y.value=null)};y.value=setTimeout(s,1e3)})},ee=async()=>{if(g.value.length===0)return;const s=`¬øEst√°s seguro de que quieres eliminar ${g.value.length} producto${g.value.length!==1?"s":""}?`;if(confirm(s)){$.value=!0;try{const o=C.value.filter(r=>g.value.includes(r.id));f.value={type:"selected",products:o,timestamp:Date.now()},await M.post("/admin/products/bulk-delete",{product_ids:g.value},{preserveScroll:!0,onSuccess:()=>{K(),g.value=[],M.reload({only:["products"]})},onError:r=>{B.value="No se pudieron eliminar algunos productos",f.value=null,console.error("Error details:",r)}})}finally{$.value=!1}}},he=s=>{const o=W.value.find(r=>r.id===s);return!o||o.emoji===null||o.emoji===void 0?"üì¶":X(o.emoji)},ye=()=>{i.value={id:null,name:"",emoji:A.value[0],showForm:!0}},we=()=>{if(!t.value.category){_("Error","Selecciona una categor√≠a para editar","error");return}const s=k.categories.find(o=>o.id.toString()===t.value.category);s&&(i.value={id:s.id,name:s.name,emoji:X(s.emoji),showForm:!0})},U=()=>{i.value.showForm=!1,setTimeout(()=>{i.value={id:null,name:"",emoji:A.value[0],showForm:!1}},200)},oe=async()=>{var s,o;try{if(!i.value.name||!i.value.name.trim()){_("Error","El nombre de la categor√≠a es requerido","error");return}const r=!!i.value.id,a=r?`/admin/categories/${i.value.id}`:"/admin/categories",c=r?"put":"post";console.log("=== Intento de guardar categor√≠a ==="),console.log("URL:",a),console.log("M√©todo:",c),console.log("Datos a enviar:",{name:i.value.name.trim()}),F.value=!0;try{console.log("Enviando solicitud a:",a),console.log("M√©todo:",c);const l=A.value.indexOf(i.value.emoji);if(l===-1){_("Error","Selecciona un emoji v√°lido","error");return}const h={name:i.value.name.trim(),emoji:l};console.log("Datos a enviar:",h);const T=((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||"";console.log("CSRF Token:",T?"Encontrado":"No encontrado");const O={method:c,url:a,data:h,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":T},withCredentials:!0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",baseURL:window.location.origin};console.log("Configuraci√≥n de la petici√≥n:",O);const L=await ne(O);if(console.log("Respuesta del servidor:",L),!L.data||!L.data.success)throw new Error(((o=L.data)==null?void 0:o.message)||"Respuesta inesperada del servidor");const j=L.data.data||L.data;if(!j)throw new Error("No se recibieron datos de la categor√≠a");if(console.log("Categor√≠a procesada:",j),r){const re=k.categories.findIndex(Ee=>Ee.id===j.id);re!==-1&&k.categories.splice(re,1,j)}else k.categories.unshift(j),j.id&&(t.value.category=j.id.toString());return _(r?"Categor√≠a actualizada":"Categor√≠a creada",L.data.message||`La categor√≠a "${j.name}" ha sido ${r?"actualizada":"creada"} exitosamente`,"success"),U(),j}catch(l){console.error("Error en la petici√≥n:",l);let h="Ocurri√≥ un error al procesar la solicitud";if(l.response){if(console.error("Datos de respuesta del error:",l.response.data),console.error("Estado de la respuesta:",l.response.status),l.response.status===422){const T=l.response.data.errors||{};h=Object.values(T).flat().join(" ")}else l.response.status===404?h="Recurso no encontrado":l.response.status===403?h="No tienes permiso para realizar esta acci√≥n":l.response.status===500&&(h="Error interno del servidor. Por favor, int√©ntalo de nuevo m√°s tarde.");h=l.response.data.message||h}else l.request?(console.error("No se recibi√≥ respuesta del servidor"),h="No se pudo conectar con el servidor. Por favor, verifica tu conexi√≥n a internet."):console.error("Error al configurar la solicitud:",l.message);throw _("Error",h,"error"),l}finally{F.value=!1}}catch(r){console.error("Error inesperado en saveCategory:",r),_("Error inesperado","Ha ocurrido un error inesperado. Por favor, revisa la consola para m√°s detalles.","error")}},ke=async()=>{var s,o,r;try{if(!i.value.id){console.error("No se proporcion√≥ un ID de categor√≠a para eliminar"),_("Error","No se proporcion√≥ un ID de categor√≠a v√°lido","error");return}if(!await de("¬øEst√°s seguro de que deseas eliminar esta categor√≠a?","Confirmar eliminaci√≥n")){console.log("Eliminaci√≥n cancelada por el usuario");return}console.log("=== Intento de eliminar categor√≠a ==="),console.log("ID de categor√≠a a eliminar:",i.value.id),F.value=!0;try{const c=((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content)||"",l=await ne({method:"delete",url:`/admin/categories/${i.value.id}`,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":c},withCredentials:!0});if(console.log("Respuesta de eliminaci√≥n:",l.data),l.data&&l.data.success){console.log("Categor√≠a eliminada exitosamente");const h=i.value.name||"la categor√≠a",T=k.categories.findIndex(O=>O.id===i.value.id);T!==-1&&k.categories.splice(T,1),t.value.category===i.value.id.toString()&&(t.value.category=""),_("Categor√≠a eliminada",`La categor√≠a "${h}" ha sido eliminada exitosamente`,"success"),U()}else throw new Error(((o=l.data)==null?void 0:o.message)||"Error desconocido al eliminar la categor√≠a")}catch(c){console.error("Error al eliminar categor√≠a:",c);let l="Ocurri√≥ un error al intentar eliminar la categor√≠a";c.response?(console.error("Datos de respuesta del error:",c.response.data),console.error("Estado de la respuesta:",c.response.status),c.response.status===422?(l=c.response.data.message||"No se puede eliminar la categor√≠a porque tiene productos asociados",c.response.data.product_count>0&&(l=`No se puede eliminar la categor√≠a porque tiene ${c.response.data.product_count} productos asociados.`)):c.response.status===404?l="La categor√≠a no fue encontrada o ya ha sido eliminada":c.response.status===403?l="No tienes permisos para eliminar esta categor√≠a":c.response.status===500&&(l="Error interno del servidor. Por favor, int√©ntalo de nuevo m√°s tarde."),l=((r=c.response.data)==null?void 0:r.message)||l):c.request?(console.error("No se recibi√≥ respuesta del servidor"),l="No se pudo conectar con el servidor. Por favor, verifica tu conexi√≥n a internet."):c.message&&(console.error("Error al configurar la solicitud:",c.message),l=c.message||l),_("Error al eliminar",l,"error")}}catch(a){console.error("Error inesperado al procesar la eliminaci√≥n:",a),_("Error inesperado","Ha ocurrido un error inesperado al intentar eliminar la categor√≠a. Por favor, revisa la consola para m√°s detalles.","error")}finally{F.value=!1}},_=(s,o,r="success")=>{const a=document.createElement("div");a.className=`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 transform ${r==="success"?"bg-green-500":"bg-red-500"} text-white`,a.innerHTML=`
    <div class="flex items-start">
      <div class="flex-shrink-0">
        ${r==="success"?"‚úÖ":"‚ùå"}
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium">${s}</h3>
        <p class="text-sm opacity-90">${o}</p>
      </div>
    </div>
  `,document.body.appendChild(a),setTimeout(()=>{a.classList.add("opacity-0","translate-x-8"),setTimeout(()=>{document.body.removeChild(a)},300)},5e3)},te=()=>{R.value=!1,b.value=!1,Q.value=null,t.value={id:null,name:"",description:"",price:1e3,stock:0,category:"",image:null,_method:"post",image_url:null,remove_image:!1},U(),S.value=null,m.value="",N.value=!1,E.value=!1};se(()=>[t.value.name,t.value.description,t.value.price,t.value.stock,t.value.category],()=>{E.value=!0});const Ce=(s,o)=>{s.target.onerror=null,s.target.src="/images/placeholder.jpg",o&&(o.image_url="/images/placeholder.jpg")},_e=()=>{P.value=!1,y.value&&(clearTimeout(y.value),y.value=null),f.value=null};return(s,o)=>(u(),d(G,null,[ae(je(Me),{title:"Productos"}),ae(De,null,{default:Ne(()=>[e("div",$e,[e("div",ze,[e("div",Fe,[P.value&&f.value?(u(),d("button",{key:0,onClick:Z,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2 animate-pulse"},[o[10]||(o[10]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)),e("span",null,"Deshacer ("+n(H.value)+"s)",1)])):p("",!0),g.value.length>=2?(u(),d("button",{key:1,onClick:ee,disabled:$.value,class:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[o[11]||(o[11]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,n($.value?"Eliminando...":`Eliminar Seleccionados (${g.value.length})`),1)],8,He)):p("",!0),C.value.length>0?(u(),d("button",{key:2,onClick:Y,disabled:z.value,class:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[o[12]||(o[12]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,n(z.value?"Eliminando...":"Eliminar Todo"),1)],8,Ae)):p("",!0),e("button",{onClick:o[0]||(o[0]=r=>R.value=!0),class:"bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[...o[13]||(o[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Agregar Nuevo Producto",-1)])])]),ue.value?(u(),d("div",Ve,[...o[14]||(o[14]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Cargando productos...",-1)])])):B.value?(u(),d("div",qe,[o[15]||(o[15]=e("div",{class:"text-red-600 mb-4"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("p",Re,n(B.value),1),e("button",{onClick:o[1]||(o[1]=(...r)=>s.loadProducts&&s.loadProducts(...r)),class:"mt-4 bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded"}," Reintentar ")])):p("",!0),C.value.length>0?(u(),d("div",Ie,[(u(!0),d(G,null,J(C.value,r=>(u(),d("div",{key:r.id,class:V(["bg-white border rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300",g.value.includes(r.id)?"border-amber-500 ring-2 ring-amber-200":"border-gray-200"])},[e("div",Ue,[e("img",{src:r.image_url,alt:r.name,class:"w-full h-48 object-cover rounded-t-lg",onError:a=>Ce(a,r)},null,40,Oe),e("label",Ge,[D(e("input",{type:"checkbox",value:r.id,"onUpdate:modelValue":o[2]||(o[2]=a=>g.value=a),class:"w-5 h-5 text-amber-600 bg-white bg-opacity-80 border-2 border-gray-300 rounded focus:ring-amber-500 focus:ring-2 checked:bg-opacity-90"},null,8,Xe),[[Se,g.value]])])]),e("div",Ke,[e("h3",Je,n(r.name),1),e("p",We,n(r.description||"Sin descripci√≥n"),1),e("div",Qe,[e("span",Ye,"‚Ç≤ "+n(r.price.toLocaleString("es-PY")),1),e("span",Ze,"Stock: "+n(r.stock),1)]),e("div",eo,[e("button",{onClick:a=>fe(r),class:"flex-1 bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-1"},[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),e("span",null,"Editar",-1)])],8,oo),e("button",{onClick:a=>xe(r.id),disabled:I.value===r.id,class:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-1"},[o[17]||(o[17]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,n(I.value===r.id?"Eliminando...":"Eliminar"),1)],8,to)])])],2))),128))])):(u(),d("div",ro,[...o[18]||(o[18]=[e("div",{class:"text-gray-400 mb-4"},[e("svg",{class:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})])],-1),e("p",{class:"text-gray-600"},"No hay productos registrados.",-1)])])),e("div",so,[P.value&&f.value?(u(),d("div",ao,[e("div",lo,[o[19]||(o[19]=e("svg",{class:"w-6 h-6 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1)),e("div",no,[e("span",io,"¬øDeshacer eliminaci√≥n? ("+n(H.value)+"s)",1),e("button",{onClick:Z,class:"bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded font-medium transition-colors"}," Deshacer "),e("button",{onClick:_e,class:"bg-blue-500 hover:bg-blue-600 px-3 py-2 rounded font-medium transition-colors",title:"Cancelar"}," ‚úï ")])])])):p("",!0),g.value.length>=2?(u(),d("button",{key:1,onClick:ee,disabled:$.value,class:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[o[20]||(o[20]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,n($.value?"Eliminando...":`Eliminar Seleccionados (${g.value.length})`),1)],8,uo)):p("",!0),C.value.length>0?(u(),d("button",{key:2,onClick:Y,disabled:z.value,class:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[o[21]||(o[21]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),e("span",null,n(z.value?"Eliminando...":"Eliminar Todo"),1)],8,co)):p("",!0),e("button",{onClick:o[3]||(o[3]=r=>R.value=!0),class:"bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-lg flex items-center space-x-2"},[...o[22]||(o[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",null,"Agregar Nuevo Producto",-1)])])]),R.value||b.value?(u(),d("div",vo,[e("div",mo,[e("div",po,[o[23]||(o[23]=e("div",{class:"absolute top-0 right-0 w-24 h-24 bg-amber-500/10 rounded-full -mr-6 -mt-6"},null,-1)),e("div",go,[e("h2",fo,[e("span",bo,n(b.value?"‚úèÔ∏è":"‚ûï"),1),w(" "+n(b.value?"Editar Producto":"Nuevo Producto"),1)]),e("p",xo,n(b.value?"Actualiza los detalles del producto":"Completa la informaci√≥n del nuevo producto"),1)])]),e("form",{onSubmit:Pe(be,["prevent"]),class:"p-6 space-y-5",enctype:"multipart/form-data"},[e("div",ho,[e("label",yo,[o[24]||(o[24]=w(" Nombre ",-1)),o[25]||(o[25]=e("span",{class:"text-red-500"},"*",-1)),e("span",wo,n(t.value.name?t.value.name.length:0)+"/50",1)]),e("div",ko,[D(e("input",{"onUpdate:modelValue":o[4]||(o[4]=r=>t.value.name=r),type:"text",maxlength:"50",required:"",placeholder:"Ej: Caf√© Americano",class:"block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[q,t.value.name]])]),t.value.name&&t.value.name.length>40?(u(),d("p",Co," Quedan "+n(50-t.value.name.length)+" caracteres ",1)):p("",!0)]),e("div",_o,[e("label",Eo,[o[26]||(o[26]=w(" Descripci√≥n ",-1)),o[27]||(o[27]=e("span",{class:"text-red-500"},"*",-1)),e("span",jo,n(t.value.description?t.value.description.length:0)+"/200",1)]),D(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=r=>t.value.description=r),rows:"3",maxlength:"200",required:"",placeholder:"Describe el producto en detalle",class:"block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[q,t.value.description]]),t.value.description&&t.value.description.length>180?(u(),d("p",Mo," Quedan "+n(200-t.value.description.length)+" caracteres ",1)):p("",!0)]),e("div",No,[e("div",So,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700"},[w(" Precio (‚Ç≤) "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Po,[o[28]||(o[28]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500"},"‚Ç≤")],-1)),D(e("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>t.value.price=r),type:"number",min:"1000",max:"100000",step:"100",required:"",class:"block w-full pl-8 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors",onBlur:me},null,544),[[q,t.value.price]])]),o[30]||(o[30]=e("p",{class:"text-xs text-gray-500"},"M√≠n: ‚Ç≤ 1,000 - M√°x: ‚Ç≤ 100,000",-1))]),e("div",To,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700"},[w(" Stock "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":o[7]||(o[7]=r=>t.value.stock=r),type:"number",min:"0",max:"1000",required:"",class:"block w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[q,t.value.stock,void 0,{number:!0}]]),o[32]||(o[32]=e("p",{class:"text-xs text-gray-500"},"M√≠n: 0 - M√°x: 1,000 unidades",-1))])]),e("div",Lo,[e("div",Do,[o[35]||(o[35]=e("label",{class:"block text-sm font-medium text-gray-700"},[w(" Categor√≠a "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Bo,[t.value.category?(u(),d("button",{key:0,type:"button",onClick:we,class:"text-xs text-amber-600 hover:text-amber-700 font-medium flex items-center",title:"Editar categor√≠a seleccionada"},[...o[33]||(o[33]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Editar ",-1)])])):p("",!0),e("button",{type:"button",onClick:ye,class:"text-xs text-amber-600 hover:text-amber-700 font-medium flex items-center"},[...o[34]||(o[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),w(" Nueva ",-1)])])])]),i.value.showForm?(u(),d("div",$o,[e("div",zo,[e("h4",Fo,n(i.value.id?"Editar":"Nueva")+" Categor√≠a ",1),e("div",Ho,[i.value.id?(u(),d("button",{key:0,type:"button",onClick:ke,class:"p-1 text-red-500 hover:text-red-700 focus:outline-none",title:"Eliminar categor√≠a",disabled:F.value},[...o[36]||(o[36]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ao)):p("",!0),e("button",{type:"button",onClick:U,class:"p-1 text-gray-500 hover:text-gray-700 focus:outline-none",title:i.value.id?"Cancelar edici√≥n":"Cerrar formulario"},[...o[37]||(o[37]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Vo)])]),e("div",qo,[e("div",Ro,[e("div",null,[o[38]||(o[38]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Nombre",-1)),D(e("input",{"onUpdate:modelValue":o[8]||(o[8]=r=>i.value.name=r),type:"text",maxlength:"30",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500",placeholder:"Ej: Bebidas Calientes",onKeyup:Te(oe,["enter"])},null,544),[[q,i.value.name]])]),e("div",null,[o[39]||(o[39]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"√çcono",-1)),e("div",Io,[(u(!0),d(G,null,J(A.value,(r,a)=>(u(),d("div",{key:a,onClick:c=>i.value.emoji=r,class:V(["w-8 h-8 flex items-center justify-center text-lg rounded-full cursor-pointer transition-all transform hover:scale-110",i.value.emoji===r?"bg-amber-100 border-2 border-amber-500 scale-110":"bg-white border border-gray-200 hover:bg-gray-50"]),title:ve(a)},n(r),11,Uo))),128))])])]),e("div",Oo,[e("div",null,[o[40]||(o[40]=e("p",{class:"text-xs text-gray-500 mb-2"},"Vista previa:",-1)),e("div",Go,[e("span",Xo,n(i.value.emoji||"üì¶"),1),e("span",Ko,n(i.value.name||"Nombre de categor√≠a"),1)])]),e("button",{type:"button",onClick:oe,class:V(["w-full mt-4 px-4 py-2 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-colors",{"opacity-50 cursor-not-allowed":!i.value.name.trim()}]),disabled:!i.value.name.trim()},n(i.value.id?"Actualizar Categor√≠a":"Crear Categor√≠a"),11,Jo)])])])):p("",!0),e("div",Wo,[D(e("select",{"onUpdate:modelValue":o[9]||(o[9]=r=>t.value.category=r),required:"",class:V(["block w-full pl-3 pr-10 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 bg-white cursor-pointer appearance-none",{"border-red-500":m.value&&!t.value.category}]),style:{"background-image":"none"}},[o[41]||(o[41]=e("option",{value:"",disabled:""},"Selecciona una categor√≠a",-1)),(u(!0),d(G,null,J(W.value,r=>(u(),d("option",{key:r.id,value:r.id.toString()},n(he(r.id))+" "+n(r.name),9,Qo))),128))],2),[[Le,t.value.category]]),o[42]||(o[42]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[e("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})])],-1))]),m.value&&!t.value.category?(u(),d("p",Yo,"Debes seleccionar una categor√≠a")):p("",!0)]),e("div",Zo,[o[47]||(o[47]=e("label",{class:"block text-sm font-medium text-gray-700"}," Imagen ",-1)),e("div",et,[e("label",ot,[o[44]||(o[44]=e("span",{class:"sr-only"},"Seleccionar imagen",-1)),e("input",{type:"file",accept:"image/*",onChange:pe,class:"hidden",id:"image-upload"},null,32),e("div",tt,[o[43]||(o[43]=e("svg",{class:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",rt,n(t.value.image?"Cambiar imagen":"Seleccionar imagen"),1)])])]),o[48]||(o[48]=e("p",{class:"text-xs text-gray-500"},"Formatos: JPEG, PNG, JPG, GIF (M√°x. 2MB)",-1)),S.value||t.value.image?(u(),d("div",st,[o[46]||(o[46]=e("p",{class:"text-xs font-medium text-gray-700 mb-1"},"Vista previa:",-1)),e("div",at,[e("img",{src:S.value||t.value.image,class:"h-24 w-24 object-cover rounded-lg border-2 border-amber-100"},null,8,lt),S.value||t.value.image?(u(),d("button",{key:0,onClick:ge,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",type:"button"},[...o[45]||(o[45]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):p("",!0)])])):p("",!0)]),e("div",nt,[e("div",it,[e("button",{type:"button",onClick:te,class:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-colors"}," Cancelar "),e("button",{type:"submit",disabled:!E.value||x.value||N.value,class:V(["px-5 py-2.5 text-sm font-medium text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors",x.value?"bg-gray-500 cursor-not-allowed":N.value?"bg-amber-800 hover:bg-amber-900":"bg-amber-600 hover:bg-amber-700 focus:ring-amber-500",!E.value||N.value?"opacity-75":""])},[x.value?(u(),d("span",ut,[o[49]||(o[49]=e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),w(" "+n(b.value?"Actualizando...":"Guardando..."),1)])):N.value?(u(),d("span",ct,[o[50]||(o[50]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),w(" "+n(b.value?"¬°Actualizado!":"¬°Guardado!"),1)])):(u(),d("span",vt,n(b.value?"Actualizar producto":"Crear producto"),1))],10,dt)]),m.value?(u(),d("p",mt,n(m.value),1)):p("",!0),o[51]||(o[51]=e("div",{class:"mt-4 pt-4 border-t border-gray-100"},[e("p",{class:"text-xs text-gray-500 text-center"},[w(" Los campos marcados con "),e("span",{class:"text-red-500"},"*"),w(" son obligatorios ")])],-1))])],32)])])):p("",!0)])])]),_:1})],64))}},ht=Be(pt,[["__scopeId","data-v-8511ed23"]]);export{ht as default};
