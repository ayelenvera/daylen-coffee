import{r as c,o as j,g as o,d as a,e as u,u as p,Z as M,w as m,f as e,i as B,t as n,q as b,j as L,n as V,F as E,z as f}from"./app-BYhsu56_.js";import{_ as P}from"./GuestLayout-CkBOnskT.js";import"./HelpLink-0Gkg05qS.js";const z={class:"flex items-center space-x-4"},H={class:"font-semibold text-xl text-gray-800 leading-tight"},N={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={key:0,class:"text-center py-8"},F={key:1,class:"text-center py-8"},A={class:"text-red-600 font-medium"},D={class:"mt-4 space-x-4"},T={key:2,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$={class:"p-6"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Q={class:"aspect-w-16 aspect-h-9"},Y=["src","alt"],R={key:1,class:"w-full h-96 bg-gray-200 flex items-center justify-center rounded-lg"},Z={class:"space-y-6"},G={class:"text-3xl font-bold text-gray-900 mb-4"},J={class:"flex items-center space-x-4 mb-4"},K={class:"text-4xl font-bold text-amber-600"},O={class:"flex items-center space-x-2"},U={class:"text-gray-600 text-lg leading-relaxed"},W={key:0,class:"space-y-4"},X={class:"flex items-center space-x-4"},ee=["disabled"],te={class:"text-xl font-semibold w-12 text-center"},se=["disabled"],oe={class:"text-sm text-gray-500 mt-1"},ae=["disabled"],re={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},le={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:2},ie={key:3},de={class:"text-center"},ce={class:"text-lg font-semibold text-gray-900"},ue={key:1,class:"text-center py-8 bg-red-50 rounded-lg"},ge={__name:"Product",props:{id:{type:[String,Number],required:!0}},setup(y){const k=y,s=c(null),v=c(!0),i=c(""),l=c(1),d=c(!1),g=async()=>{var r;try{v.value=!0,i.value="";const t=await f.get(`/api/products/${k.id}`);t.data.success?s.value=t.data.data:i.value=t.data.message||"Error al cargar el producto"}catch(t){console.error("Error loading product:",t),((r=t.response)==null?void 0:r.status)===404?i.value="Producto no encontrado":i.value="Error de conexión. Intente nuevamente."}finally{v.value=!1}},_=()=>{l.value<s.value.stock&&l.value++},w=()=>{l.value>1&&l.value--},C=async()=>{try{d.value=!0;const r=await f.post("/api/cart/add",{product_id:s.value.id,quantity:l.value});r.data.success?alert("Producto agregado al carrito correctamente"):alert(r.data.message||"Error al agregar producto al carrito")}catch(r){console.error("Error adding to cart:",r),alert("Error al agregar producto al carrito")}finally{d.value=!1}};return j(()=>{g()}),(r,t)=>{var x;return a(),o(E,null,[u(p(M),{title:`${((x=s.value)==null?void 0:x.name)||"Producto"} - Cafetería`},null,8,["title"]),u(P,null,{header:m(()=>{var h;return[e("div",z,[u(p(b),{href:r.route("home"),class:"text-amber-600 hover:text-amber-700 flex items-center space-x-2"},{default:m(()=>[...t[0]||(t[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",null,"Volver",-1)])]),_:1},8,["href"]),e("h2",H,n(((h=s.value)==null?void 0:h.name)||"Cargando..."),1)])]}),default:m(()=>[e("div",N,[e("div",S,[v.value?(a(),o("div",q,[...t[1]||(t[1]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Cargando producto...",-1)])])):i.value?(a(),o("div",F,[t[3]||(t[3]=e("div",{class:"text-red-600 mb-4"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("p",A,n(i.value),1),e("div",D,[e("button",{onClick:g,class:"bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded"}," Reintentar "),u(p(b),{href:r.route("home"),class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:m(()=>[...t[2]||(t[2]=[L(" Volver al Inicio ",-1)])]),_:1},8,["href"])])])):s.value?(a(),o("div",T,[e("div",$,[e("div",I,[e("div",Q,[s.value.image?(a(),o("img",{key:0,src:s.value.image,alt:s.value.name,class:"w-full h-96 object-cover rounded-lg shadow-md"},null,8,Y)):(a(),o("div",R,[...t[4]||(t[4]=[e("svg",{class:"w-24 h-24 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),e("div",Z,[e("div",null,[e("h1",G,n(s.value.name),1),e("div",J,[e("span",K,"₲ "+n(Number(s.value.price||0).toLocaleString("es-PY",{maximumFractionDigits:0})),1),e("div",O,[t[5]||(t[5]=e("span",{class:"text-sm text-gray-500"},"Stock:",-1)),e("span",{class:V(s.value.stock>0?"text-green-600 font-semibold":"text-red-600 font-semibold")},n(s.value.stock)+" unidades ",3)])]),e("p",U,n(s.value.description||"Sin descripción disponible."),1)]),s.value.stock>0?(a(),o("div",W,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cantidad ",-1)),e("div",X,[e("button",{onClick:w,disabled:l.value<=1,class:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,ee),e("span",te,n(l.value),1),e("button",{onClick:_,disabled:l.value>=s.value.stock,class:"w-10 h-10 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])],8,se)]),e("p",oe," Máximo: "+n(s.value.stock)+" unidades ",1)]),e("button",{onClick:C,disabled:d.value,class:"w-full bg-amber-600 hover:bg-amber-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2"},[d.value?(a(),o("svg",re,[...t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(a(),o("svg",le,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"},null,-1)])])),d.value?(a(),o("span",ne,"Agregando...")):(a(),o("span",ie,"Agregar al Carrito"))],8,ae),e("div",de,[e("p",ce," Subtotal: ₲ "+n(Number(s.value.price*l.value||0).toLocaleString("es-PY",{maximumFractionDigits:0})),1)])])):(a(),o("div",ue,[...t[11]||(t[11]=[e("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})],-1),e("p",{class:"text-red-600 font-medium"},"Producto sin stock",-1),e("p",{class:"text-red-500 text-sm mt-1"},"Este producto no está disponible en este momento",-1)])]))])])])])):B("",!0)])])]),_:1})],64)}}};export{ge as default};
